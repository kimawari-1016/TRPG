<!DOCTYPE html><html>
<head>
  <meta charset="UTF-8">
  <title>TRPGキャラクターシート</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input[type="text"], input[type="number"] { width: 60px; }
    table { border-collapse: collapse; margin-bottom: 20px; }
    td, th { border: 1px solid #ccc; padding: 4px 8px; text-align: center; }
    .status-table { margin-bottom: 40px; }
  </style>
</head>
<body>
  <h1>TRPGキャラクターシート</h1>
  <label>名前：<input type="text"></label><br>
  <label>年齢：<input type="number"></label>
  <label>性別：<input type="text"></label><br>
  <label>特色：
    <select id="color" onchange="updateRegion()">
      <option value="白">白</option>
      <option value="黄">黄</option>
      <option value="橙">橙</option>
      <option value="赤">赤</option>
      <option value="紫">紫</option>
      <option value="青">青</option>
      <option value="緑">緑</option>
      <option value="黒">黒</option>
    </select>
  </label>
  <span id="region">シストベリ</span>  <div class="status-table">
    <h3>メインステータス</h3>
    <p>使用可能ポイント：<span id="remainingPoints">250</span></p>
    <table>
      <tr>
        <th></th>
        <th>体力</th><th>精神</th><th>筋力</th>
        <th>俊敏</th><th>器用</th><th>知力</th>
      </tr>
      <tr>
        <td>初期値</td>
        <td><input type="number" id="sta_体" value="30" readonly></td>
        <td><input type="number" id="sta_精" value="30" readonly></td>
        <td><input type="number" id="sta_筋" value="30" readonly></td>
        <td><input type="number" id="sta_俊" value="30" readonly></td>
        <td><input type="number" id="sta_器" value="30" readonly></td>
        <td><input type="number" id="sta_知" value="30" readonly></td>
      </tr>
      <tr>
        <td>割り振り</td>
        <td><input type="number" id="add_体" placeholder="" oninput="updateStats()"></td>
        <td><input type="number" id="add_精" placeholder="" oninput="updateStats()"></td>
        <td><input type="number" id="add_筋" placeholder="" oninput="updateStats()"></td>
        <td><input type="number" id="add_俊" placeholder="" oninput="updateStats()"></td>
        <td><input type="number" id="add_器" placeholder="" oninput="updateStats()"></td>
        <td><input type="number" id="add_知" placeholder="" oninput="updateStats()"></td>
      </tr>
    </table>
  </div>  <div class="status-table">
    <h3>戦闘ステータス</h3>
    <p>戦闘ステータス用ポイント：<span id="combatPoints">0</span></p>
    <table>
      <tr>
        <th></th>
        <th>HP</th><th>MP</th><th>装甲値</th><th>速度</th><th>後隙</th>
      </tr>
      <tr>
        <td>初期値</td>
        <td><input type="number" id="sta_HP" value="0" readonly></td>
        <td><input type="number" id="sta_MP" value="0" readonly></td>
        <td><input type="number" id="sta_DEF" value="0" readonly></td>
        <td><input type="number" id="sta_SPD" value="0" readonly></td>
        <td><input type="number" id="sta_DLY" value="0" readonly></td>
      </tr>
      <tr>
        <td>割り振り</td>
        <td><input type="number" id="add_HP" oninput="updateStats()"></td>
        <td><input type="number" id="add_MP" oninput="updateStats()"></td>
        <td><input type="number" id="add_DEF" oninput="updateStats()"></td>
        <td><input type="number" id="add_SPD" oninput="updateStats()"></td>
        <td><input type="number" id="add_DLY" oninput="updateStats()"></td>
      </tr>
      <tr>
        <td>合計</td>
        <td><input type="number" id="total_HP" readonly></td>
        <td><input type="number" id="total_MP" readonly></td>
        <td><input type="number" id="total_DEF" readonly></td>
        <td><input type="number" id="total_SPD" readonly></td>
        <td><input type="number" id="total_DLY" readonly></td>
      </tr>
    </table>
  </div>  <div class="status-table">
    <h3>スキルステータス</h3>
    <p>スキルポイント：<span id="skillPoints">1000</span></p>
    <table id="skillTable">
      <tr>
        <th>技能名</th><th>補足</th><th>割り振り</th>
      </tr>
    </table>
    <button onclick="addSkillRow()">技能を追加</button>
  </div>  <script>
    function updateRegion() {
      const regionMap = {
        "白": "シストベリ", "黄": "黄華", "橙": "燈火祖界", "赤": "極紅",
        "紫": "フィーリラ", "青": "アジュール", "緑": "ヴェルディア", "黒": "メランペプロス"
      };
      const color = document.getElementById("color").value;
      document.getElementById("region").textContent = regionMap[color];
    }

    function updateStats() {
      // ここに前回までの updateStats 関数の中身を貼り付け
      // スキルポイントも更新する
      let totalSkillPoints = 1000;
      const rows = document.querySelectorAll("#skillTable tr.skill-row");
      rows.forEach(row => {
        const input = row.querySelector(".skill-input");
        let value = parseInt(input.value) || 0;
        if (value > 100) {
          totalSkillPoints -= (100 + (value - 100) * 2);
        } else {
          totalSkillPoints -= value;
        }
      });
      document.getElementById("skillPoints").textContent = totalSkillPoints;
      document.getElementById("skillPoints").style.color = totalSkillPoints < 0 ? "red" : "black";
    }

    function addSkillRow() {
      const table = document.getElementById("skillTable");
      const row = document.createElement("tr");
      row.className = "skill-row";
      row.innerHTML = `
        <td><input type="text" placeholder="技能名"></td>
        <td><input type="text" placeholder="補足"></td>
        <td><input type="number" class="skill-input" oninput="updateStats()"></td>
      `;
      table.appendChild(row);
    }

    window.onload = () => {
      updateStats();
      addSkillRow();
    };
  </script></body>
</html>
