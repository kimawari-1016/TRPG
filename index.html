<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>キャラ作成</title>
  <style>
    .status-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .status-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      border: 1px solid #ccc;
      padding: 8px;
      border-radius: 6px;
    }
    .stat-block {
      margin: 4px 0;
    }
  </style>
</head>
<body>
  <h1>TRPGキャラ作成</h1>

  <label for="name">名前:</label>
  <input type="text" id="name"><br><br>

  <label for="age">年齢:</label>
  <input type="number" id="age"><br><br>

  <label for="color">特色:</label>
  <select id="color" onchange="updateRegion()">
    <option value="白">白</option>
    <option value="黄">黄</option>
    <option value="橙">橙</option>
    <option value="赤">赤</option>
    <option value="紫">紫</option>
    <option value="青">青</option>
    <option value="緑">緑</option>
    <option value="黒">黒</option>
  </select>
  <span>地域: <span id="region">シストベリ</span></span>

  <h2>ステータス</h2>
  <p>割り振り可能ポイント: <span id="point-pool">250</span></p>

  <div class="status-row" id="status-container">
    <!-- JavaScriptで自動生成 -->
  </div>

  <script>
    const regionMap = {
      "白": "シストベリ",
      "黄": "黄華",
      "橙": "燈火祖界",
      "赤": "極紅",
      "紫": "フィーリラ",
      "青": "アジュール",
      "緑": "ヴェルディア",
      "黒": "メランペプロス"
    };

    function updateRegion() {
      const color = document.getElementById("color").value;
      document.getElementById("region").textContent = regionMap[color] || "";
    }

    const statusList = [
      { id: "vitality", label: "体力" },
      { id: "spirit", label: "精神" },
      { id: "strength", label: "筋力" },
      { id: "agility", label: "俊敏" },
      { id: "dexterity", label: "器用" },
      { id: "intelligence", label: "知力" }
    ];

    const baseStat = 30;
    const maxPoints = 250;

    function createStatusInputs() {
      const container = document.getElementById("status-container");
      statusList.forEach(stat => {
        const item = document.createElement("div");
        item.className = "status-item";
        item.innerHTML = `
          <strong>${stat.label}</strong>
          <div class="stat-block">現在値<br><input type="number" value="${baseStat}" readonly id="${stat.id}-current"></div>
          <div class="stat-block">割り振り<br><input type="number" value="0" min="0" id="${stat.id}-add"></div>
        `;
        container.appendChild(item);
      });
    }

    function updatePoints() {
      let totalSpent = 0;
      statusList.forEach(stat => {
        const addValue = parseInt(document.getElementById(`${stat.id}-add`).value) || 0;
        totalSpent += addValue;

        const currentInput = document.getElementById(`${stat.id}-current`);
        currentInput.value = baseStat + addValue;
      });

      const remaining = maxPoints - totalSpent;
      const pointPool = document.getElementById("point-pool");
      pointPool.textContent = remaining;
      pointPool.style.color = (remaining < 0) ? "red" : "black";
    }

    window.addEventListener("DOMContentLoaded", () => {
      createStatusInputs();
      updateRegion();
      updatePoints();

      statusList.forEach(stat => {
        document.getElementById(`${stat.id}-add`).addEventListener("input", updatePoints);
      });
    });
  </script>
</body>
</html>
